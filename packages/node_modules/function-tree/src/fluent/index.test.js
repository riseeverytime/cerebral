/* eslint-env mocha */
// @ts-ignore: stupid module
import * as assert from 'assert';
import { SequenceFactory, SequenceWithPropsFactory } from './';
;
const Sequence = SequenceFactory();
const SequenceWithProps = SequenceWithPropsFactory();
describe('Fluent', () => {
    it('should return array', () => {
        function action1(context) {
        }
        var seq = Sequence(x => x
            .action(action1));
        assert.deepEqual(seq, [action1]);
    });
    it('should return paths correctly', () => {
        function action1(context) { }
        function action2(context) { }
        function action3(context) {
            context.state.stateData = "Something";
            return context.path.success({ newName: "John" });
        }
        var seq = SequenceWithProps(x => x
            .action(action1)
            .branch(action3)
            .paths({
            success: z => z.action(action1, action2),
            error: z => z.action(action2)
        }));
        assert.deepEqual(seq, [
            action1,
            action3,
            {
                success: [action1, action2],
                error: [action2]
            }
        ]);
    });
});
