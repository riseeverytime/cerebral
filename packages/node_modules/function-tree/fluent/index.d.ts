import { Primitive } from "../";

export interface IContext<TProps> {
    props: TProps;
}

export interface IContextWithPaths<TProps, TPaths> extends IContext<TProps> {
    path: {
        [key in keyof TPaths]: (props: TPaths[key]) => TPaths[key];
    };
}
export interface ISequenceBuilder<TContext, TProps> {
	action<TOutput>(...action: ((input: TContext & IContext<TProps>) => TOutput | Promise<TOutput>)[]) : SequenceBuilder<TContext, TProps & TOutput>
	action<TOutput>(name: string, ...action: ((input: TContext & IContext<TProps>) => TOutput | Promise<TOutput>)[]) : SequenceBuilder<TContext, TProps & TOutput>
	action<TOutput>(...action: any[]) : SequenceBuilder<TContext, TProps & TOutput>
	pathsAction<TOutput, TPaths>(action: ((input: TContext & IContextWithPaths<TProps, TPaths>) => TOutput)) : {
		paths: (paths: { [key in keyof TPaths]: (input: SequenceBuilder<TContext, TProps & TPaths[key]>) => SequenceBuilder<TContext, TProps & TPaths[key]> }) => SequenceBuilder<TContext, TProps & TOutput>
	}
	parallel<TOutput>(name: string, chain: ((input: SequenceBuilder<TContext, TProps>) => SequenceBuilder<TContext, TOutput>)) : SequenceBuilder<TContext, TProps & TOutput>
	parallel<TOutput>(chain: ((input: SequenceBuilder<TContext, TProps>) => SequenceBuilder<TContext, TOutput>)) : SequenceBuilder<TContext, TProps & TOutput>
	parallel<TOutput>(...args: any[]) : SequenceBuilder<TContext, TProps & TOutput>
	sequence<TOutput = void>(seq: (input: TProps) => TOutput | (() => TOutput)): SequenceBuilder<TContext, TProps & TOutput>
}

export declare class SequenceBuilder<TContext = {}, TProps = {}> {
    private sequenceArray;
    constructor(sequenceArray: any[]);
    action<TOutput>(...action: ((props: TContext & IContext<TProps>) => TOutput | Promise<TOutput>)[]): SequenceBuilder<TContext, TProps & TOutput>;
    action<TOutput>(name: string, ...action: ((props: TContext & IContext<TProps>) => TOutput | Promise<TOutput>)[]): SequenceBuilder<TContext, TProps & TOutput>;
    pathsAction<TOutput, TPaths>(action: ((props: TContext & IContextWithPaths<TProps, TPaths>) => TOutput)): {
        paths: (paths: {
            [key in keyof TPaths]: (props: SequenceBuilder<TContext, TProps & TPaths[key]>) => SequenceBuilder<TContext, TProps & TPaths[key]>;
        }) => SequenceBuilder<TContext, TProps & TOutput>;
    };
    parallel<TOutput>(name: string, chain: ((props: SequenceBuilder<TContext, TProps>) => SequenceBuilder<TContext, TOutput>)): SequenceBuilder<TContext, TProps & TOutput>;
    parallel<TOutput>(chain: ((props: SequenceBuilder<TContext, TProps>) => SequenceBuilder<TContext, TOutput>)): SequenceBuilder<TContext, TProps & TOutput>;
    sequence<TOutput = void>(seq: (props: TProps) => TOutput | (() => TOutput)): SequenceBuilder<TContext, TProps & TOutput>;
}

export declare function sequenceFactory<TContext, TProps>(arg: (props: SequenceBuilder<TContext, TProps>) => SequenceBuilder<TContext, TProps>): Primitive;
